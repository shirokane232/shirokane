import a from"./BrqzjRh4.js";import{H as o,y as s,A as t,E as e,C as n,I as i,G as d,z as u}from"./-n5fOHii.js";import{_ as f}from"./DlAUqK2U.js";const b=o("/markdown/threads-automation/access-threads-api/b6b2893d-01d7-4739-bfd6-834694d36b83.png"),p=o("/markdown/threads-automation/access-threads-api/5341b5a7-9cde-4771-9fd2-ce1a1dcab51d.png"),g={},m={href:"https://developers.facebook.com/docs/threads/",rel:"noopener noreferrer",target:"_blank"},k={href:"https://www.cloudflare.com/",rel:"noopener noreferrer",target:"_blank"},v={href:"https://developers.facebook.com/apps/creation/",rel:"noopener noreferrer",target:"_blank"},c={href:"https://github.com/shirokane232/cf/blob/main/nuxt.config.ts",rel:"noopener noreferrer",target:"_blank"},C={href:"https://github.com/shirokane232/cf/blob/main/server/api/threads/auth/login.ts",rel:"noopener noreferrer",target:"_blank"},T={href:"https://github.com/shirokane232/cf/blob/main/server/api/threads/auth/callback.ts",rel:"noopener noreferrer",target:"_blank"},h={href:"https://www.threads.com/login",rel:"noopener noreferrer",target:"_blank"};function w(A,l){const r=a;return u(),s(d,null,[l[25]||(l[25]=t("h1",null,"Threads API 服務開通",-1)),l[26]||(l[26]=t("hr",null,null,-1)),l[27]||(l[27]=t("h3",null,"快速總結：",-1)),t("ul",null,[t("li",null,[l[1]||(l[1]=e(" 要使用 ",-1)),t("a",m,[l[0]||(l[0]=e("Threads API",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])]),l[2]||(l[2]=e("，你首先需要一個公開的網域來進行 Meta OAuth 驗證。 ",-1))]),t("li",null,[l[4]||(l[4]=e(" 利用 ",-1)),t("a",k,[l[3]||(l[3]=e("Cloudflare",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])]),l[5]||(l[5]=e(" 託管來提供這個必要的網域，同時它也作為一個輕量級的後端平台，讓我們可以運行程式碼。 ",-1))]),l[6]||(l[6]=t("li",null,"設定與驗證是否能取得Access Token。",-1))]),l[28]||(l[28]=t("hr",null,null,-1)),l[29]||(l[29]=t("h3",null,"Step 1: 在 Facebook 開發者主控台註冊你的應用程式",-1)),t("ul",null,[t("li",null,[l[8]||(l[8]=e(" 至",-1)),t("a",v,[l[7]||(l[7]=e("Facebook 開發者主控台",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])]),l[9]||(l[9]=e("建立應用程式 ",-1))]),l[10]||(l[10]=i('<li data-v-bfb82c3f> 至<code data-v-bfb82c3f>應用程式角色</code> &gt; <code data-v-bfb82c3f>角色</code> &gt; <code data-v-bfb82c3f>新增用戶</code> &gt; <code data-v-bfb82c3f>增加 Threads 測試人員</code><img src="'+b+'" alt="Add Threads Tester" data-v-bfb82c3f></li><li data-v-bfb82c3f> 至<code data-v-bfb82c3f>使用案例</code> &gt; <code data-v-bfb82c3f>存取Thread API (自訂)</code> &gt; <code data-v-bfb82c3f>設定</code><ul data-v-bfb82c3f><li data-v-bfb82c3f>取得 <code data-v-bfb82c3f>Client ID</code> : Threads 應用程式編號</li><li data-v-bfb82c3f>取得 <code data-v-bfb82c3f>Client Secret</code> : Threads 應用程式密鑰</li><li data-v-bfb82c3f> 重新導向回呼網址：填入前端的 callback <ul data-v-bfb82c3f><li data-v-bfb82c3f> 我這邊是填入等等要去 Cloudflare 完成的後端 https://&lt;你的cloudflare Pages&gt;.pages.dev/api/threads/auth/callback </li></ul></li><li data-v-bfb82c3f>解除安裝回呼網址：填入前端的cancel callback</li><li data-v-bfb82c3f> 刪除回呼網址：填入前端的delete callback <img src="'+p+'" alt="Secrets" data-v-bfb82c3f></li></ul></li>',2))]),l[30]||(l[30]=t("h3",null,"Step 2: 設定重新導向回呼網址 (本例使用 Cloudflare)",-1)),t("ul",null,[l[20]||(l[20]=t("li",null,[e(" 開通自己的Github repository 並設定 Cloudflare Workers & Pages，詳細例子"),t("a",{href:"/free-tier-services/cloudflare-nuxt-backend"},"請看這"),e("。 ")],-1)),t("li",null,[l[12]||(l[12]=e(" 在 ",-1)),t("a",c,[l[11]||(l[11]=e("nuxt.config.ts",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])]),l[13]||(l[13]=e(" 加入下列變數： ",-1)),l[14]||(l[14]=t("ul",null,[t("li",null,"Client ID -> runtimeConfig.public.threadsClientId"),t("li",null,"Redirect Path -> runtimeConfig.public.threadsRedirectPath"),t("li",null,[e(" Client Secret: "),t("ul",null,[t("li",null,"runtimeConfig.threadsClientSecret"),t("li",null,"注意不要放在public下面，記得去 Cloudflare 更新 Secret。")])])],-1))]),t("li",null,[l[16]||(l[16]=e(" 提供 User Login 的導向網址：",-1)),t("a",C,[l[15]||(l[15]=e("/server/api/threads/auth/login.ts",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])])]),t("li",null,[l[18]||(l[18]=e(" 提供 Callback 的導向網址：",-1)),t("a",T,[l[17]||(l[17]=e("/server/api/threads/auth/callback.ts",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])]),l[19]||(l[19]=t("ul",null,[t("li",null," 在 callback.ts 檔案中，除了將授權碼（code）交換為 Access Token 之外，還進行了額外的步驟，將這個 Access Token 進一步換成了長效期的Token (long-lived token) ")],-1))])]),l[31]||(l[31]=t("h3",null,"Step 3: 驗證",-1)),t("ul",null,[l[23]||(l[23]=t("li",null,"打開瀏覽器輸入：https://<你的cloudflare domain>.pages.dev/api/threads/auth/login",-1)),t("li",null,[l[22]||(l[22]=e(" 會導向",-1)),t("a",h,[l[21]||(l[21]=e("Threads的Login畫面",-1)),t("span",null,[n(r,{name:"uil:arrow-up-right",class:""})])])]),l[24]||(l[24]=t("li",null,"輸入帳號密碼後並同意授權後，就可以從response得到Access Token跟User ID的資訊",-1))])],64)}const P=f(g,[["render",w],["__scopeId","data-v-bfb82c3f"]]);export{P as default};
