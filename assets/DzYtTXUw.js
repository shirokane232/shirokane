import o from"./Bbgfw-W-.js";import{H as n,y as s,A as e,E as t,C as a,I as i,G as d,z as u}from"./BgpmTV0R.js";import{_ as p}from"./DlAUqK2U.js";const b=n("/markdown/threads-automation/access-threads-api/b6b2893d-01d7-4739-bfd6-834694d36b83.png"),f=n("/markdown/threads-automation/access-threads-api/5341b5a7-9cde-4771-9fd2-ce1a1dcab51d.png"),g={},m={href:"https://developers.facebook.com/docs/threads/",rel:"noopener noreferrer",target:"_blank"},k={href:"https://www.cloudflare.com/",rel:"noopener noreferrer",target:"_blank"},v={href:"https://developers.facebook.com/apps/creation/",rel:"noopener noreferrer",target:"_blank"},c={href:"https://github.com/shirokane232/cf/blob/main/nuxt.config.ts",rel:"noopener noreferrer",target:"_blank"},h={href:"https://github.com/shirokane232/cf/blob/main/server/api/threads/auth/login.ts",rel:"noopener noreferrer",target:"_blank"},C={href:"https://github.com/shirokane232/cf/blob/main/server/api/threads/auth/callback.ts",rel:"noopener noreferrer",target:"_blank"},T={href:"https://www.threads.com/login",rel:"noopener noreferrer",target:"_blank"};function w(A,l){const r=o;return u(),s(d,null,[l[25]||(l[25]=e("h1",null,"Threads API 服務開通",-1)),l[26]||(l[26]=e("hr",null,null,-1)),l[27]||(l[27]=e("h3",null,"快速總結：",-1)),e("ul",null,[e("li",null,[l[1]||(l[1]=t(" 要使用 ",-1)),e("a",m,[l[0]||(l[0]=t("Threads API",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])]),l[2]||(l[2]=t("，你首先需要一個公開的網域來進行 Meta OAuth 驗證。 ",-1))]),e("li",null,[l[4]||(l[4]=t(" 利用 ",-1)),e("a",k,[l[3]||(l[3]=t("Cloudflare",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])]),l[5]||(l[5]=t(" 託管來提供這個必要的網域，同時它也作為一個輕量級的後端平台，讓我們可以運行程式碼。 ",-1))]),l[6]||(l[6]=e("li",null,"設定與驗證是否能取得Access Token。",-1))]),l[28]||(l[28]=e("hr",null,null,-1)),l[29]||(l[29]=e("h3",null,"Step 1: 在 Facebook 開發者主控台註冊你的應用程式",-1)),e("ul",null,[e("li",null,[l[8]||(l[8]=t(" 至",-1)),e("a",v,[l[7]||(l[7]=t("Facebook 開發者主控台",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])]),l[9]||(l[9]=t("建立應用程式 ",-1))]),l[10]||(l[10]=i('<li data-v-c3701ba7> 至<code data-v-c3701ba7>應用程式角色</code> &gt; <code data-v-c3701ba7>角色</code> &gt; <code data-v-c3701ba7>新增用戶</code> &gt; <code data-v-c3701ba7>增加 Threads 測試人員</code><img src="'+b+'" alt="Add Threads Tester" data-v-c3701ba7></li><li data-v-c3701ba7> 至<code data-v-c3701ba7>使用案例</code> &gt; <code data-v-c3701ba7>存取Thread API (自訂)</code> &gt; <code data-v-c3701ba7>設定</code><ul data-v-c3701ba7><li data-v-c3701ba7>取得 <code data-v-c3701ba7>Client ID</code> : Threads 應用程式編號</li><li data-v-c3701ba7>取得 <code data-v-c3701ba7>Client Secret</code> : Threads 應用程式密鑰</li><li data-v-c3701ba7> 重新導向回呼網址：填入前端的 callback <ul data-v-c3701ba7><li data-v-c3701ba7> 我這邊是填入等等要去 Cloudflare 完成的後端 https://&lt;你的cloudflare Pages&gt;.pages.dev/api/threads/auth/callback </li></ul></li><li data-v-c3701ba7>解除安裝回呼網址：填入前端的cancel callback</li><li data-v-c3701ba7> 刪除回呼網址：填入前端的delete callback <img src="'+f+'" alt="Secrets" data-v-c3701ba7></li></ul></li>',2))]),l[30]||(l[30]=e("h3",null,"Step 2: 設定重新導向回呼網址 (本例使用 Cloudflare)",-1)),e("ul",null,[l[20]||(l[20]=e("li",null,[t(" 開通自己的Github repository 並設定 Cloudflare Workers & Pages，詳細例子"),e("a",{href:"/shirokane/free-tier-services/cloudflare-nuxt-backend"},"請看這"),t("。 ")],-1)),e("li",null,[l[12]||(l[12]=t(" 在 ",-1)),e("a",c,[l[11]||(l[11]=t("nuxt.config.ts",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])]),l[13]||(l[13]=t(" 加入下列變數： ",-1)),l[14]||(l[14]=e("ul",null,[e("li",null,"Client ID -> runtimeConfig.public.threadsClientId"),e("li",null,"Redirect Path -> runtimeConfig.public.threadsRedirectPath"),e("li",null,[t(" Client Secret: "),e("ul",null,[e("li",null,"runtimeConfig.threadsClientSecret"),e("li",null,"注意不要放在public下面，記得去 Cloudflare 更新 Secret。")])])],-1))]),e("li",null,[l[16]||(l[16]=t(" 提供 User Login 的導向網址：",-1)),e("a",h,[l[15]||(l[15]=t("/server/api/threads/auth/login.ts",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])])]),e("li",null,[l[18]||(l[18]=t(" 提供 Callback 的導向網址：",-1)),e("a",C,[l[17]||(l[17]=t("/server/api/threads/auth/callback.ts",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])]),l[19]||(l[19]=e("ul",null,[e("li",null," 在 callback.ts 檔案中，除了將授權碼（code）交換為 Access Token 之外，還進行了額外的步驟，將這個 Access Token 進一步換成了長效期的Token (long-lived token) ")],-1))])]),l[31]||(l[31]=e("h3",null,"Step 3: 驗證",-1)),e("ul",null,[l[23]||(l[23]=e("li",null,"打開瀏覽器輸入：https://<你的cloudflare domain>.pages.dev/api/threads/auth/login",-1)),e("li",null,[l[22]||(l[22]=t(" 會導向",-1)),e("a",T,[l[21]||(l[21]=t("Threads的Login畫面",-1)),e("span",null,[a(r,{name:"uil:arrow-up-right",class:""})])])]),l[24]||(l[24]=e("li",null,"輸入帳號密碼後並同意授權後，就可以從response得到Access Token跟User ID的資訊",-1))])],64)}const P=p(g,[["render",w],["__scopeId","data-v-c3701ba7"]]);export{P as default};
